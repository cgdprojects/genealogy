webpackJsonp([57],{"/Nkn":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"CardControl"}},"02GH":function(e,t,s){var n=s("VU/8")(s("bIv0"),s("GLCp"),!1,function(e){s("1scV")},"data-v-41d96d68",null);e.exports=n.exports},"1scV":function(e,t,s){var n=s("TdTz");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);s("rjj0")("ffb38a6a",n,!0,{})},"4Hs9":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("02GH"),i=s.n(n),a=s("zhSu"),r=s.n(a),o=s("Rxb0"),c=s.n(o);t.default={name:"CheckboxManager",components:{Card:i.a,CardControl:r.a,ManagerContent:c.a},props:{title:{type:String,required:!0},groupData:{type:[Array,Object],required:!0},rolePermissions:{type:Array,required:!0},nested:{type:Boolean,default:!1}},computed:{isRoot:function(){return Array.isArray(this.groupData)},sortedGroups:function(){return this.isRoot?[]:Object.keys(this.groupData).sort()},checkbox:function(){return this.$el.querySelector("input[type=checkbox]")}},methods:{setChecked:function(){this.checkbox.indeterminate=!1,this.checkbox.checked=!0,this.$emit("update")},setIndeterminate:function(){this.checkbox.checked=!1,this.checkbox.indeterminate=!0,this.$emit("update")},setUnchecked:function(){this.checkbox.checked=!1,this.checkbox.indeterminate=!1,this.$emit("update")},update:function(){var e=this.$refs.children.filter(function(e){return e.checkbox.checked}).length;if(e!==this.$refs.children.length){var t=this.$refs.children.filter(function(e){return e.checkbox.indeterminate}).length;e||t?this.setIndeterminate():this.setUnchecked()}else this.setChecked()},updateBelow:function(){return this.isRoot?this.updateContent():this.updateChildren()},updateContent:function(){return this.checkbox.checked?this.$refs.content.setAllChecked():this.$refs.content.setAllUnchecked()},updateChildren:function(){var e=this;this.$refs.children.forEach(function(t){t.checkbox.checked=e.checkbox.checked,t.updateBelow()})}}}},ChWA:function(e,t,s){var n=s("VU/8")(s("4Hs9"),s("MOWA"),!1,function(e){s("L36Z")},"data-v-4717d725",null);e.exports=n.exports},GLCp:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card"},[e.header?s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[e.icon?s("span",{staticClass:"icon is-small has-margin-right-small"},[s("fa",{attrs:{icon:e.icon}})],1):e._e(),e._v(" "),!e.fixed&&e.title?s("span",{staticClass:"is-clickable",on:{click:function(t){e.toggle()}}},[e._v("\n                "+e._s(e.title)+"\n            ")]):e.title?s("span",[e._v(e._s(e.title))]):e._e()]),e._v(" "),e.search?s("div",{staticClass:"has-vertically-centered-content"},[s("p",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],staticClass:"input is-small",attrs:{type:"search"},domProps:{value:e.query},on:{input:[function(t){t.target.composing||(e.query=t.target.value)},function(t){e.$emit("query-update",e.query)}]}}),e._v(" "),s("span",{staticClass:"icon is-small is-left"},[s("fa",{attrs:{icon:"search"}})],1)])]):e._e(),e._v(" "),e._l(e.controls,function(t){return e._t("control-"+t)}),e._v(" "),null!==e.badge?s("card-control",[s("span",{staticClass:"tag is-link"},[e._v("\n                "+e._s(e.badge)+"\n            ")])]):e._e(),e._v(" "),e.refresh?s("card-control",{on:{click:function(t){e.$emit("refresh")}}},[s("span",{staticClass:"icon is-small"},[s("fa",{attrs:{icon:"sync"}})],1)]):e._e(),e._v(" "),e.fixed?e._e():s("card-control",{on:{click:function(t){e.toggle()}}},[s("span",{staticClass:"icon angle",attrs:{"aria-hidden":!e.expanded}},[s("fa",{attrs:{icon:"angle-down"}})],1)]),e._v(" "),e.removable?s("card-control",{on:{click:function(t){e.destroy()}}},[s("a",{staticClass:"delete is-small"})]):e._e()],2):e._e(),e._v(" "),s("div",{staticClass:"card-content is-paddingless",style:e.contentStyle},[e._t("default")],2),e._v(" "),e._t("footer"),e._v(" "),e.overlay?s("overlay",{attrs:{size:"medium"}}):e._e()],2)},staticRenderFns:[]}},"H2+z":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns is-multiline has-padding-medium"},e._l(e.groupData,function(t,n){return s("div",{key:n,staticClass:"column is-half"},[s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedIds,expression:"checkedIds"}],staticClass:"is-checkradio",attrs:{type:"checkbox",id:"checkbox-"+e._uid+"-"+t.id,name:"checkbox-"+e._uid+"-"+t.id},domProps:{value:t.id,checked:Array.isArray(e.checkedIds)?e._i(e.checkedIds,t.id)>-1:e.checkedIds},on:{change:function(s){var n=e.checkedIds,i=s.target,a=!!i.checked;if(Array.isArray(n)){var r=t.id,o=e._i(n,r);i.checked?o<0&&(e.checkedIds=n.concat([r])):o>-1&&(e.checkedIds=n.slice(0,o).concat(n.slice(o+1)))}else e.checkedIds=a}}}),e._v(" "),s("label",{attrs:{for:"checkbox-"+e._uid+"-"+t.id}},[s("span",{class:e.getClass(t)},[e._v("\n                        "+e._s(t.description||t.name)+"\n                    ")]),e._v(" "),t.default?s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.__("Default"),expression:"__('Default')"}],staticClass:"icon is-small has-text-info has-margin-left-medium"},[s("fa",{attrs:{icon:"exclamation-triangle"}})],1):e._e()])])])}))},staticRenderFns:[]}},L36Z:function(e,t,s){var n=s("wcwj");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);s("rjj0")("2181d0b0",n,!0,{})},MOWA:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("card",{ref:"card",attrs:{title:e.title,collapsed:"",scrollable:"",nested:e.nested,controls:1},on:{shrink:function(t){e.$emit("shrink",t)},extend:function(t){e.$emit("extend",t)}}},[s("card-control",{attrs:{slot:"control-1"},slot:"control-1"},[s("div",{staticClass:"field"},[s("input",{staticClass:"is-checkradio is-info",attrs:{type:"checkbox",id:"checkbox-"+e._uid,name:"checkbox-"+e._uid},on:{change:e.updateBelow}}),e._v(" "),s("label",{attrs:{for:"checkbox-"+e._uid}})])]),e._v(" "),s("div",{staticClass:"has-padding-medium"},[e._l(e.sortedGroups,function(t){return s("checkbox-manager",{key:t,ref:"children",refInFor:!0,attrs:{nested:"",title:t,"group-data":e.groupData[t],"role-permissions":e.rolePermissions},on:{shrink:function(t){e.$refs.card.shrink(t)},extend:function(t){e.$refs.card.extend(t)},update:e.update}})}),e._v(" "),e.isRoot?s("manager-content",{ref:"content",attrs:{"group-data":e.groupData,"role-permissions":e.rolePermissions},on:{checked:e.setChecked,indeterminate:e.setIndeterminate,unchecked:e.setUnchecked}}):e._e()],2)],1)},staticRenderFns:[]}},Rxb0:function(e,t,s){var n=s("VU/8")(s("SYJ6"),s("H2+z"),!1,null,null,null);e.exports=n.exports},SYJ6:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("VN6J"),i=s("QxPg"),a=s("EQBe");i.a.library.add(a.I),t.default={name:"ManagerContent",directives:{tooltip:n.b},props:{groupData:{type:Array,required:!0},rolePermissions:{type:Array,required:!0}},data:function(){return{checkedIds:[]}},computed:{permissionIds:function(){return this.groupData.map(function(e){return e.id})},status:function(){return this.checkedIds.length===this.permissionIds.length?"checked":0===this.checkedIds.length?"unchecked":"indeterminate"}},watch:{status:{handler:function(){this.$emit(this.status)}},checkedIds:function(){this.removeGroupPermissions(),this.addCheckedPermissions()}},created:function(){this.setCheckedIds()},mounted:function(){this.checkIfEmpty()},methods:{setCheckedIds:function(){var e=this;this.checkedIds=this.permissionIds.filter(function(t){return e.rolePermissions.indexOf(t)>-1})},setAllChecked:function(){this.checkedIds=JSON.parse(JSON.stringify(this.permissionIds)),this.checkIfEmpty()},setAllUnchecked:function(){this.checkedIds=[],this.checkIfEmpty()},getClass:function(e){return Object.prototype.hasOwnProperty.call(e,"type")?1===e.type?"has-text-warning":"has-text-success":null},checkIfEmpty:function(){0===this.groupData.length&&this.$emit(this.status)},removeGroupPermissions:function(){var e=this;this.permissionIds.forEach(function(t){var s=e.rolePermissions.indexOf(t);-1!==s&&e.rolePermissions.splice(s,1)})},addCheckedPermissions:function(){var e=this;this.checkedIds.forEach(function(t){e.rolePermissions.push(t)})}}}},TdTz:function(e,t,s){(e.exports=s("FZ+f")(!1)).push([e.i,".card-header-title[data-v-41d96d68]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.card-content[data-v-41d96d68]{-webkit-transition:max-height .4s ease;transition:max-height .4s ease}.icon.angle[aria-hidden=true][data-v-41d96d68]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.icon.angle[data-v-41d96d68]{-webkit-transition:-webkit-transform .3s ease;transition:-webkit-transform .3s ease;transition:transform .3s ease;transition:transform .3s ease,-webkit-transform .3s ease}",""])},bIv0:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("QxPg"),i=s("EQBe"),a=s("zhSu"),r=s.n(a),o=s("zXii"),c=s.n(o);n.a.library.add(i._5,i._12,i.d),t.default={name:"Card",components:{CardControl:r.a,Overlay:c.a},props:{nested:{type:Boolean,default:!1},collapsed:{type:Boolean,default:!1},icon:{type:[Object,Array,String],default:null},title:{type:String,default:null},search:{type:Boolean,default:!1},badge:{type:Number,default:null},refresh:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1},removable:{type:Boolean,default:!1},controls:{type:Number,default:0},overlay:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1}},data:function(){return{query:null,expanded:!this.collapsed}},computed:{searchInput:function(){return this.search?this.$el.querySelector("input[type=search]"):null},header:function(){return this.icon||this.title||this.search||this.badge||this.refresh||!this.fixed||this.removable||this.controls},content:function(){return this.$el.querySelector(".card-content")},maxHeight:function(){return this.collapsed?{"max-height":0}:{}},overflowY:function(){return this.scrollable||!this.expanded?{"overflow-y":"hidden"}:{}},contentStyle:function(){return Object.assign({},this.maxHeight,this.overflowY)}},methods:{toggle:function(){this.$emit("toggle"),this.expanded?this.collapse():this.expand()},expand:function(){var e=this;this.nested&&this.$emit("extend",this.content.scrollHeight),this.$emit("expand"),this.content.style["max-height"]=this.content.scrollHeight+"px",setTimeout(function(){e.expanded=!0},400)},collapse:function(){var e=this;this.content.style["max-height"]||(this.content.style["max-height"]=this.content.scrollHeight+"px"),this.nested&&this.$emit("shrink",this.content.scrollHeight),this.$emit("collapse"),setTimeout(function(){e.content.style["max-height"]=0},1),this.expanded=!1},resize:function(){var e=this;if(this.expanded){var t=parseInt(this.content.style["max-height"],10);this.$nextTick(function(){e.nested&&e.$emit("extend",e.content.scrollHeight-t),e.content.style["max-height"]=e.content.scrollHeight+"px"})}},shrink:function(e){return this.content.style["max-height"]=parseInt(this.content.style["max-height"],10)-e+"px",this.$emit("shrink",e)},extend:function(e){return this.content.style["max-height"]=parseInt(this.content.style["max-height"],10)+e+"px",this.$emit("extend",e)},focus:function(){this.searchInput.focus()},clearQuery:function(){this.query=null},destroy:function(){this.$emit("remove"),this.$el.parentNode.removeChild(this.$el),this.$destroy()}}}},cQ0e:function(e,t){e.exports={render:function(){var e=this.$createElement;return(this._self._c||e)("a",this._g({staticClass:"card-header-icon"},this.$listeners),[this._t("default")],2)},staticRenderFns:[]}},iS6K:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns is-centered"},[s("div",{staticClass:"column is-three-quarters"},[e.data?s("div",{staticClass:"animated fadeIn"},[s("center",{staticClass:"has-padding-bottom-large"},[s("h5",{staticClass:"title is-5"},[e._v(e._s(e.data.role.display_name))])]),e._v(" "),e.data.menus.length?s("checkbox-manager",{attrs:{title:e.__("Menus"),"role-permissions":e.data.roleMenus,"group-data":e.data.menus}}):e._e(),e._v(" "),e.data.menus.length?s("checkbox-manager",{attrs:{title:e.__("Permissions"),"role-permissions":e.data.rolePermissions,"group-data":e.data.permissionTree}}):e._e(),e._v(" "),s("button",{staticClass:"button is-success has-margin-top-large is-pulled-right",attrs:{disabled:!e.canAccess("system.roles.setPermissions")},on:{click:e.update}},[e._v("\n                "+e._s(e.__("Update"))+"\n            ")]),e._v(" "),s("div",{staticClass:"is-clearfix"})],1):e._e()])])},staticRenderFns:[]}},q3gz:function(e,t,s){var n=s("VU/8")(s("sQdx"),s("iS6K"),!1,null,null,null);e.exports=n.exports},sQdx:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("ChWA"),i=s.n(n);t.default={components:{CheckboxManager:i.a},data:function(){return{roleId:this.$route.params.role,data:null}},created:function(){this.get()},methods:{get:function(){var e=this;axios.get(route("system.roles.getPermissions",this.roleId)).then(function(t){var s=t.data;e.data=s}).catch(function(t){return e.handleError(t)})},update:function(){var e=this;axios.post(route("system.roles.setPermissions",this.roleId),this.postParams()).then(function(t){var s=t.data;e.$toastr.success(s.message)}).catch(function(t){return e.handleError(t)})},postParams:function(){return{roleMenus:this.data.roleMenus,rolePermissions:this.data.rolePermissions}}}}},wcwj:function(e,t,s){(e.exports=s("FZ+f")(!1)).push([e.i,".field[data-v-4717d725]{width:15px}",""])},zhSu:function(e,t,s){var n=s("VU/8")(s("/Nkn"),s("cQ0e"),!1,null,null,null);e.exports=n.exports}});
//# sourceMappingURL=57.js.map